package it.italiaonline.rnd.builders

import spock.lang.Specification
import spock.lang.Shared
import spock.lang.Unroll
import spock.lang.AutoCleanup

// to do a functional test
import ratpack.groovy.test.GroovyRatpackMainApplicationUnderTest

// local
import it.italiaonline.rnd.charts.Size
import it.italiaonline.rnd.charts.Labels
import it.italiaonline.rnd.charts.DataSource
import it.italiaonline.rnd.charts.SupportedCharts
import it.italiaonline.rnd.time.TimeSeries
import it.italiaonline.rnd.time.TimeGranularity
//import it.italiaonline.rnd.rest.LineChartRequest
import it.italiaonline.rnd.colors.Colors

/**
 * Build a json representation of the json post payload
 * needed to query the charts rest service
 */
class LineChartRequestSpec extends Specification {

	@Shared
	String  defaultTitle      = ''
	@Shared
	Size    chartLow          = new Size(1000,300)
	@Shared
	Labels  defaultAxisLabels = new Labels('','')
	@Shared
	Boolean defaultLegend     = false
	// time series
	@Shared
	List xValues = new TimeSeries (
		Date.parse('y-MM','2016-04'),
		Date.parse('y-MM','2017-04'),
		'y-MM',
		TimeGranularity.MONTH
	).series()
	@Shared
	List yValues = [10, 1, 5, 3, 9, 4, 1, 4, 7, 10, 1, 5, 13]
	@Shared
	DataSource ds1 = new DataSource (
	                  'ds1',
	                  xValues,
	                  yValues,
	                  Colors.PASSION_RED.color
	                )
	@Shared
	List defaultDataSources = [ds1]

	@Shared
	String base64 = 'iVBORw0KGgoAAAANSUhEUgAAA+gAAAEsCAIAAADfJw44AAAerElEQVR42u3dMWhcd57AcRUqVKhQ4cIcKlSoUOHCRQIuUkzhQoUgKly4cKHChfYwrAsVIhh0WBwKuPCyPhBZsQyLjqgIi7nVggIuRqwCYnEhsGCVQwQt6A6xiIuOnSziToXvF/1W714k20kcy5r/+PNFhJlnB+vv93//95k3T+Oe55IkSZI6vh5/BZIkSRK4S5IkSQJ3SZIkCdwlSZIkgbskSZIkcJckSZLAXZIkSRK4S5IkSQJ3SZIkCdzrra6uVo/vS5IkSXplFwb3+p/96u9DkiRJescDd0mSJAncwV2SJEkCd0mSJAncwV2SJEnqFri32+3Nzc2lpaVms7mxsVH/pe3t7YWFhYcPH66srBwdHYG7JEmSdGFwn5iY6DlpZmam2r64uNjb21v90vXr18/aHdwlSZKktwT3paWlMPrY2Fgd7mH0S5cuxZa1tbV4euXKlXgcvxPcJUmSpIuBe5bX3Su4r6+v54X2fDo9PR2P4/eAuyRJktRBcG82m/F0cHAwn8b2eNpoNPLp6urq2X/8KR4/Oym3PKt13lv2fv6rrz/8OL+eT3wSX9XTgrb86Q9/vMC/Q1tsscUWW2x5S1v2/1romfo7W+Z+Z5/a8mO3XADcO/GKe+Ofn/fcKv5rZ98rUUlS9xfnuy44a4c9pE644l7erTLgLkkSuIO7uhvuW1tbrVZrdHQ0aR6Pd3Z2Tv1w6tWrVzv9h1PBXZIkcAd3dTfc6x8HWf9QyMI+DhLcJUkCd3BXd8N9bW2t+d2qf4Yp/wGmBw8erKysHB4evvrPBndwlyQJ3KVzhPub+rPBHdwlSQJ3CdzBXZIkcAd3gTu4g7skSeAO7gJ3cAd3SZLAXQJ3cJckCdzBXeAO7uAuSRK4g7vAHdzBXZIE7uAucAd3cJckCdzBXeAO7uAuSRK4S+AO7pIkgTu4C9zBHdwlSQJ3cBe4gzu4S5IE7hK4g7skSeAO7gJ3cAd3SZLAHdwF7uAO7pIkcAd3gTu4g7skSeAO7gJ3cAd3SZLAHdwF7uAO7pIkcAd3gTu4g7v0xg630r9u/ovdKIE7uAvcwR3c1e11wbE2dNdulMAd3AXu4A7uAndwlwTuEriDuwTu4C6BO7gL3MEd3CVwlwTu4C5wB3dwF7iDuyRwF7iDO7hL4A7uEriDu8Ad3MFdAndJ4A7uAndwB3eBO7hL4A7uAndwB3cJ3MFdAndwF7iDO7gL3MFdErhL4A7uEriDuwTu4C5wB3dwl8BdEriDu8Ad3MFd4A7uksBdAndwl8Ad3CVwB3eBO7iDuwTuksAd3AXu4A7uAndwl8Ad3AXu4A7uEriDuwTu4C5wB3dwF7iDuyRwl8Ad3CVwB3cJ3MFd4H7m2NnZuX379sjIyNDQUKPRePz4MbiDuwTuksAd3NVZcD88PBwcHOzp6bl+/fr09HRfX188brVa4A7uErhLAndwVwfBfWdnp+e47e3tb/XbaMTjZrMJ7uAugbskcAd3dRDcj46ORkdHA+v37t1bXl4eGBjo7+9PxL8G3J+dlFue1TrvLd+8/1EXLAFffv7FBf4d2mLLD93SLXC3T22x5cK2dBHc7VNbftSWn3qP+9ra2uXLl3tOmpyc/N7/ZXV19f5J4A7utoA7uNtiiy3gbi/bcu5w39vbC7X39fUtLy/v7Oxcu3Yt7D4/P+9WGbfKSG6VkeRWGbfKqINulWm1WiH1oaGhfDozMxNPJyYmwB3cJXCXBO7grg6C++7ubl9fX29v7/z8fCB+ZGQk4D43Nwfu4C6BuyRwB3d1ENyjpaWlgYGB6h738fHxdrsN7uAugbskcAd3dRbco5D62tpaq9Xa2tp67T8b3MFd4A7uksBdOl+4v5E/G9zBXeAO7pLAXQJ3cJfAHdwlcAd3gTu4g7sE7pLAHdwF7uAO7gJ3cJcE7hK4g7sE7uAugTu4C9zBHdwlcJcE7uAucAd3cBe4g7sE7uAucAd3cJfAHdwlcAd3gTu4g7vAHdwlgbsE7uAugTu4S+AO7gJ3cAd3CdwlgTu4C9zBHdwF7uAuCdwlcAd3CdzBXQJ3cBe4gzu4S+AuCdzBXeAO7uAucAd3CdzBXeAO7uAugTu4S+AO7gJ3cAd3CdwlgTu4C9zBHdwF7uAuVR3+77fnhdK/9v8K7hK4g7sE7uCurq71p2443CY+AXcJ3MFdAndwF7iDO7gL3MEd3CVwl8Ad3MFd4A7u4C5wB3cJ3MFd4A7u4C6BO7gL3MEd3AXu4A7uAndwl8Ad3MFd4A7uEriDuwTu4C5wB3dwl8Ad3AXu4A7uAndwB3eBO7hL4A7uEriDuwTu4C5wB3dwF7iDO7hL4C6BO7iDu8Ad3MFd4A7uEriDu8Ad3MFdAndwF7iDO7gL3MEd3CVwl8Ad3MFd4A7u4C5wB3cJ3MFd4A7u4C6BO7gL3MEd3AXu4A7uAndwl8Ad3CVwB3cJ3MFd4A7u4C5wB3dwl8BdAndwB3cVBvd2u71+XDwAd3CXwF0Cd3AHd3Ui3GdnZy9dutRzXG9v787ODriDuwTuEriDO7irs+A+NzcXXh8eHl5aWnry5Ek83d/ff40/G9zBXeAO7hK4g7t0XnA/PDwcGBgIuG9tbe3u7v5wsoM7uAvcwV0Cd3CX3h7cNzc3Q+19fX0jIyN5n8ydO3eOjo5e/X+trq7eP6n+fTw7Kbc8q3XeW755/6MuWAK+/PyLC/w7tMWWH7qlW+Bun9rS4Vu++vXvu+Bw+/rDj18w0i6Cu7lqy4/a8pPg3mq18tb2sbGxZrM5PDwcjx88eOCKuyvukivukivurri74q4OuuK+sbGRcN/e3o6nMzMz8bjRaIA7uEvgLoE7uIO7OgjuUX6ezNOnT+Px1NRUPL5x4wa4g7sE7hK4gzu4q7Pgfu/evfxUmYmJif7+/r6+vvX1dXAHdwncJXAHd3BXZ8E9evTo0fXr18Puo6Ojeekd3MFdAncJ3MEd3NVxcH8jfza4g7vAHdwlcAd3CdzBXQJ3cBe4gzu4C9zBHdwlcJfAHdzBXeAO7uAucAd3CdzBXQJ3cJfAHdwF7uAO7gJ3cAd3CdwlcAd3cBe4gzu4C9zBXQJ3cBe4gzu4S+AO7gJ3cAd3gTu4g7vAHdwlcAd3CdzBXQJ3cBe4gzu4C9zBHdwlcJfAHdzBXeAO7uAucAd3CdzBXQJ3cJfAHdwF7uAO7gJ3cAd3CdwlcAd3cBe4gzu4C9zBXQJ3cBe4gzu4S+AO7gJ3cAd3gTu4g7sE7hK4gzu4C9zBHdwF7uAugTu4C9zBHdw7ro0/P5/5bfFfcWYFd3CXwB3c34Waf+iGE/fB38Ad3MH9tY7/LthrsQSAO7hL4A7u70K4Be5mEriDO7iDuwTu4A7u4A7uZhK4gzu4g7vAHdzBHbfAHdzBHdzBHdwlcAd3cMctcDeTwB3cwR3cBe7gDu7gDu7gbiaBO7iDuwTu4A7uuAXuZhK4gzu4g7sE7uAO7rgF7mYSuIM7uIO7wB3cwR23wB3cwR3cwR3cJXAHd3DHLXA3k8Ad3MEd3CVwB3dwB3dwN5PAHdzBHdwF7uAO7rgF7uAO7uAO7uAugTu4gztugbuZBO7gDu7gLoE7uIM7uIO7mQTu4A7u4C5wB3dwxy1wB3dwB3dwB3cJ3MEd3HEL3M0kcAd3cAd3gTu4gztugTu4m0ngDu7gLoE7uIM7boG7mQTu4A7u4C6BO7iDO7iDu5kE7uAO7uAucAd3cMetdwTu6+vrQ8c9fPgQ3MEd3MEd3CVwB3dwx61OhHu73R4eHu45bmZmBtzBHdzBHdwlcAd3cMetToT7nTt3BgYGGo0GuIM7uIM7uEvgDu7gjlsdCve1tbXe3t6FhYWJiQlwB3dwB3dwl8Ad3MEdtzoR7u12e2hoqNFoHB0d/XC4r66u3j+p/n08Oym3PKt13lu+ef+jLphJX37+xQX+Hb79Lbuzn3bBXvvLz+bfkf31/1u6Be5nR7o/8cuvP/w4v77VxsQn1dOCtrwr8/Bky59/8dui91c+/uo3K2dH+tWvf98Fh9u3Iz27B7sI7u/UEddl3LqQv8OfBPe5ubnA+uzsbLPZ/OCDD+Lx+Pj4ysqKK+6uuLvi7or7u3jFPbZ3wejeteIY7IK9FuuhK+6uuLvi7or79yx3MzM9Z2o0GuAO7uAO7uAO7uAO7uAO7rjVQXDf2dlpnTQ6Ohpqn5iY2NjYAHdwB3dwB3dwB3dwB3dwx60Ognu9qakpn+MO7uAO7uAO7uAO7uAO7rjV6XD/iX82uIM7uIM7uIM7uIM7uIM7boG7mQTu4A7u4A7u4A7u4A7u4A7uZhK4gzu4gzu4gzu4gztugbuZBO7gDu7gDu7gDu7gDu64Be5mEriDO7iDO7iDO7iDO26BO7iDO7iDO7iDO7iDO7iDO26Bu5kE7uAO7uAO7uAO7uAO7uAO7mYSuIM7uIM7uIM7uIM7boE7uIM7uIM7uIM7uIM7uIM7boG7mQTu4A7u4A7u4A7u4A7u4A7uZhK4gzu4gzu4gzu4gztugbuZBO7gDu7gDu7gDu7gDu64Be5mEriDO7iDO7iDO7iDO26BO7iDO7iDO7iDO7iDO7iDO26Bu5kE7uAO7uAO7uAO7uAO7uAO7mYSuIM7uIM7uIM7uIM7boE7uIM7uIM7uIM7uIM7uIM7boG7mQTu4A7u4A7u4A7u4A7u4A7uZhK4gzu4gzu4gzu4gztugTu4gzu419r9r28JWPrX1KfgDu7gDu7gDu64Be5mErh3Ndy745z0wtMtuIM7uIM7uIM7boG7mQTu4A7u4A7u4A7u4A7u4A7uZhK4gzu4gzu4gzu4gztugTu4gzu4gzu4gzu4gzu4gztugbuZBO7gDu7gDu7gDu7gDu7gDu5mEriDO7iDO7iDO7iDO26Bu5kE7uAO7uAO7uAO7uAO7rgF7mYSuIM7uIM7uIM7uIM7boE7uIM7uIM7uIM7uIM7uIM7boG7mQTu4A7u4A7u4A7u4A7u4A7uZhK4gzu4gzu4gzu4gztugTu4gzu4gzu4gzu4gzu4gztugbuZBO7gDu7gDu7gDu7gDu7gDu5mEriDO7iDO7iDO7iDO26Bu5kE7uAO7uAO7uAO7uAO7rgF7mYSuIM7uIM7uIM7uIM7boE7uIM7uIM7uIM7uIM7uIM7boG7mQTu4A7u4A7u4A7u4A7u4P5acG+322tra4uLi81mc3NzE9zBHdzBHdzBHdzBHdzBHbc6Ee59fX09tSYnJ8Ed3MEd3MEd3MEd3MEd3HGr4+A+Pj7+2Wef7ezsPHr0KO2+tbUF7uAO7uAO7uAO7uAO7uCOW50F9+/87uNarRa4gzu4gzu4gzu4gzu4gztudSjcm81mqH14ePjw8PDVv3N1dfX+SfXv49lJueVZrfPe8s37H3XBTPry8y8u8O/w7W/Znf20C/baX342f3aksSu7YGhff/jxi/dgt8D97Mz8n3/4xy4YXXevG2e3xDHYBXst1sOzI/3q17/v2pWki+D+Th1xXcatC/k7fDNwD7X39vYODg5ubGy89j3u4A7u4A7u4A7u4A7u4A7u4H6OcJ+fn0+1b29vv/bVfrfKuFXGrTJulXGrjFtl3CrjVhm3yrhVBrfO8VaZ27dv9/T0XL58udVq7RzXbrfBHdzBHdzBHdzBHdzBHdxxq7Pg3nOmZrMJ7uAO7uAO7uAO7uAO7uCOW50F95kz/fDb3MEd3MEd3MEd3MEd3MEd3HHrLcH9Tf3Z4A7u4A7u4A7u4A7u4A7uuAXuZhK4gzu4gzu4gzu4gzu4gzu4m0ngDu7gDu7gDu7gDu64Be5mEriDO7iDO7iDO7iDO7jjFribSeAO7uAO7uAO7uAO7rgF7uAO7uAO7uAO7uAO7uAO7rgF7mYSuIM7uIM7uIM7uIM7uIM7uJtJ4A7u4A7u4A7u4A7uuAXu4A7u4A7u4A7u4A7u4A7uuAXuZhK4gzu4gzu4gzu4gzu4gzu4m0ngDu7gDu7gDu7gDu64Be5mEriDO7iDO7iDO7iDO7jjFribSeAO7uAO7uAO7uAO7rgF7uAO7uAO7uAO7uAO7uAO7rgF7mYSuIM7uIM7uIM7uIM7uIM7uJtJ4A7u4A7u4A7u4A7uuAXu4A7u4A7u4A7u4A7u4A7uuAXuZhK4gzu4gzu4gzu4gzu4gzu4lzqTYmOs3aV/7f03uIM7uF8k3Lf+sxtWkoO/gTu4FwD39e1uONzAHdzB/XVmUhefk8Ad3MH9rcE99mYXDO2FmAB3cO80uHfxSgLu4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4A7u4P6OwH17e3tjY6PdboM7uIM7uIM7uIM7uIM7uIN7J8I9vD40NNRzXG9v7+zsLLiDO7iDO7iDO7iDO7iDO7h3HNyvXLkSZA+vP3nyZGBgIB63Wi1wB3dwB3dwB3dwB3dwB3dw7yC4b29v57X2w8PDeDo5ORmP7969C+7gDu7gDu7gDu7gDu7gDu4dBPfFxcWQ+uXLl/+++s3MxNNGo/Hq/2t1dfX+SfXv49lJueVZrfPesvfzX3394cf59e0aMfFJ9bSgLX/6wx/PjvTPv/ht6eOKB1/9ZuXsHoyNpY8rvmIHnZ2ZsStLH1d8/cc//euLj7jCx/XtlqlPX7iS7E/8sgtWkheumbE3u2Al+fd/a51dSXKRLP2Iy0Xy1BEX4+3alWT/r92wksz97l1bSSpuFT0zK269fa/Gg58E92azGVIfGhr6UXDvxCvukiRJUmf3k+C+vLwcUu/r66vDfXx8HNwlSZKkDoJ7u90OtQfWd3Z24unY2Fg8fvjwIbhLkiRJHQT36O7du4H14eHhRqPR29s7ODi4t7cH7pIkSVJnwf358Z3ut27dGhsbm56ezkvv4C5JkiR1HNzfyJ8N7pIkSRK4S5IkSeAO7pIkSRK4S5IkSQJ3SZIkCdxf2erqav37kCRJkvSKLgzukiRJkt5I4C5JkiSBuyRJkqSy4L66uuqmJUmSJOll1X9A1BX3c+x+935sjqEZmqEZnaEZmqEZnaG9Q1fcwd3QDM3QDM2OMzRDMzSjMzRwv/he/daGoRmaoRmaHWdohmZoRmdo4C5JkiSBuyRJkiRwlyRJkgTu59v+/v7h4WFXDi3GdXBwYGglzsmjo6N3Z2jtdntnZ2dvb89KUlaxK2PUTiKySL7B4tR2diWJjbFIln64xVJ/9sQdg42h7e7ugru+v7W1tStXrvT09PT29t6+ffvUoTI1NTV0XInzKb7nmzdv9vX1xejee++9jY2N3P7BBx8M1YrfU+KiduvWrRxa7L4nT55Uv/T48eNr167lLw0ODpYIwfn5+UuXLsX3PzAwcO/evTwzndprhe64hYWF+M5jaP39/dPT0zm02JvVRI0ajcb29naJK8nVq1dzJblx40Z1cp2bm8sVJgZe7c2yWllZiR00MjISQ4glsX6uvXv3buzKGF38av0wLKVYH2ZnZ2N/xayrH1Av215WMfcmJyevX78eo6jW/62trYmJiTgjxN6MvRZ7sEQIxiJ5+fLlU4tkyC9O4jm0WDAL3Wubm5vxzediWK0kT58+jfNarC25wsQ+LXGvhUnGxsZyFDGE2F+5PVbI3JgrSavVAne9tPBB/3EzMzPj4+MxaeK/1a8uLy9Xk6maYQUVB0B857FGx7oWA4kFLkeRcmqcFAt3cUMbHR3NnRU7rve4WOxi++LiYmwP9cYZK4wYJ63i4J5DiIUshpYQjN0X20MP1S5L1hfniaWlpfRrDC1GEY9z7oWQ4nEMttlsxrKea3pZQ4sjK5aRmIfxaiTOtTGEdEMOeXh4uBpaiYdbHE0jx+V6Um0PJMWWGFfs0FheYvjr6+tlDS2IkK/wc2Z+7/bCWNDTE7rNs1iFoZiKsSX2WuzKfLUcj8tdSYLp1SIZY4xdllsK3WsHBwe5vMdKEjsoL7rFy5LYazG0O3fuxJDzN8Q6U9bQYhS5hsQoYhnM4ysvvccYY0t1yotJC+56aQG7CkBx6q0bvd1ux6zKc22JcI8zaBI2L0Wkk+LAqOBe7l6LV+15KspjPle3GFqMNIf29OnTckeXS9v8/HyeYs+egQ4PD3PhXllZKfHl1sOHDysYhRtiONUerLYXd9IN2lYv+2NE6aFYNHLI8RqyPuRC7++KHVSHe3UYbm1tVYdhnfWlOGl/f//srHvZ9uKuTFWrYgX32F/V6SwOxjzBlb6SnH3RVehey5Xk2rVr9ZUkRrS3t1e9WRdnhxIHmC+3glU5kJyWcY47+0K6aJ+A+7kXh0dMkUePHuXT9FBMr7yYlJeoC4V7Hv/xQjaf5mk11rvqgMmTboC+uLel8viPnVX3RAwtd1asdDdu3BgeHo6xV3u2lGKlzvmWbyDEf/Np/X2D1PzVq1eLO9zyJLS8vFx/nRyvMDc2NuJYq66fxcz87LPPSpREdRtJHmIxUXP7gwcPnh+/g5dDXltb6wK4x+vG+mEYx1q+zV3i0F5GvdLhXp+NL1znE+5hqS5YSapFsui9dvPmzfpKku8exNm8/nvyLco8mxfU9PR0/Y2CfGdycnIyn8aaH6e2XDBLfFsS3N/2ila95que5ik29VAo3PMsGy6vwz2fxn/jZUn8hnw/IRbBsu6WO3UduhppeCh3Vix2sTHvgFxcXCxoaKdeKL7wdWPO0rLG9fdF6rgERDW0eHpwcJBTMYbW398fL7qKo239Ha36SpIvMmNQcQDGuOp/A6XD/dRh+MJ3h8C9k+EeL5jjdVe8Ti7uhxNeuJJUi2TRe+3USnLqaRQ7K07ZAwMD1Q8tlNKpN+VOPc1ZmvfJlHh2A/e3V15xz+thz2tX3POGzuZxOZni95T1A3N5xb26Llu/4l4vb+Is6zhJDMXKVfdEDC3vDqreu793715xd0tXV9zzbp+zV9wfP36cS1u73S7ucMvrZDGE59+94p4np/pl6eLucTx1oai64v78+FL0lStXYsutW7fq87N0uOcV9zgM841vV9zLgnu8No7zXRySOUu7YCXppivud+7cyaenrrjPz8/39/fHUVbiGpJX3KsfqDh1xT1Pf5W48j1ncNcLisOjujM1XJ4zZnd3t3rxV+/UzVgdXsivflrNn1KfnZ0N8FXX1+OXSrwsHQt03ueTA8mVLoYWh32MNx7nS6x0RnE/d5WfQJK3by4sLOSPNla/mvsxf7W48rJ6Av3Jkyd5KTr2Wh5uedmvOg2XNbQYVDXZDg4OEhanPooqX5PEYAv9ALtTcK8Ow7zyly9Lbt++De6dD/dY8PNTGQp986e+kuQLyPoiWfRey5Ukr7jFyTpXknwHMuEbJ4gSPyrj+fHNMPWfu6suGtY/yi9+qei3JcH9bZSfBRHHRnXfSP6g6vr6euuknEZLS0vFfT5JErD6VJk4YEISMeQYbwyzGnJgt7iflsvvPF5x5dCixHr+tHH8arzKyjsT8j7Igsr3E0ZGRmIH5R6M1yT5S7F856cDFfrTjblw573s+QokTkXPT94Oqn+qTHWLVynFkZWfKhMTMj+fKt/qicMtxhLDnJqayjf0irt9//nxbTAxivRfvNSPx3kJMA+30dHR2KE5/OLevo8dFN98zsA4suJxvip+2fayiu85P/AnTwTxOMYV0s1XXHEMTpxU7kqSn0OSi2RMv5icuSVOcyV+lGes7Xk1LRaNfDEcuyk4m582lgdg9YnAZQ0tRpFntFg38pppnKNjvLG8xPkuVsjqlFfuOQ7c31KBofzY7zitxvp19p88KPpz3OPIj9e1cU6Ngz/vvogX8QGLNERqqcSXtnFUx87KocXuqz5fJXZfHP+xHMSZKdaCfC+1uObn52P9ijkZE6/6sPPnx28Q5WeBl3u4LSwsvPfeezG02Hf1z3HPnwXP023YvdDPcY+pGBMyDq7gQr4dFP/NXRkT8tQ/OFCW/079GwL5w3P5Oe7xNAYYK0lxH3P0vPYpFlXpoZdtL6uzbx3HuKq7Eep1xyK5vr5+aqKW+Gnum5ub8bI/1sNYSarPcY/XKkNnKtEkyY8YXYwx1/lq5Uyyj46OFv25cOAuSZIkgbskSZIkcJckSZIE7pIkSRK4S5IkSQJ3SZIkCdwlSZIkgbskSZIkcJckSZLAXZIkSdIF93+tUHOEMEGDpgAAAABJRU5ErkJggg=='

	def "Should return the base64 representation of the chart"() {
		given: 'a linechart payload for the chart service'
			def chartPayload = new ChartsRestPayload (
			                     SupportedCharts.LINECHART,
			                     chartLow,
			                     defaultDataSources
			                   )
		and: 'a stub connection url'
			URL url = GroovyMock()

		when: 'require a base64 encoded images of the requested chart'
			//def result = new LineChartRequest (
			//                  url,
			//                  chartPayload.json()
			//                ).base64
		then:
			1 * url.getBytes() >> new File('src/test/groovy/it/italiaonline/rnd/assets/line_chart.png').bytes
			result == base64
	}
}
